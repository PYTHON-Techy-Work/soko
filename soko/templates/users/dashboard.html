{% extends "layout.html" %}
{% block content %}

<style type="text/css">
.chart{
    width:100%;
    border:1px solid #ccc;
}

#dashboard .metrics .metric .field{
  color:black;
}


#dashboard .metrics .metric{
  border-right:1px solid #ccc;
}

#dashboard .metrics{
  background:white;
  border:1px solid #ccc;
}

</style>
   
<div id="dashboard">
<div class="content">
  <h1><i class="ion-arrow-graph-up-right"></i> Dashboard</h1>
  <p>At a glance information on your current orders and other users</p>


<div class="content-wrapper">
<div class="metrics clearfix">
    <div class="metric">
      <span class="field">Items you've sold</span>
      <span class="data label-success">902</span>
    </div>
    <div class="metric">
      <span class="field">Currently listed items</span>
      <span class="data label-primary">108</span>
    </div>
    <div class="metric">
      <span class="field">Sales this month</span>
      <span class="data label-info">$674.00</span>
    </div>
    <div class="metric">
      <span class="field">Total Sales</span>
      <span class="data label-warning">$3,823.90</span>
    </div>
  </div>
</div>

<div class="row">
<div class="col-md-4">
<div id="piechart" class="chart"></div>
</div>

<div class="col-md-8">
<div class="barchart chart">
                            <h3>Sales last month</h3>
                            <div id="bar-chart"></div>
                        </div>
</div>




</div>
</div>

<div class="row" style="margin-top:-50px">

<div class="panel panel-default">
      <div class="panel-heading"><h3>Currently listed items</h3></div>
      <div class="panel-body">

    <table class="table table-striped datatable">
        <thead>
            <th>#</th>
            <th>Name</th>
            <th>User</th>
            <th>Status</th>
            <th>When</th>
            <th></th>
        </thead>
        <tbody>
            {% for i in ["Test", "Product", "Here","Test", "Product", "Here","Test", "Product", "Here"] %}
                <tr>
                    <td>#{{loop.index}}</td>
                    <td>{{i}}</td>
                    <td>Test User</td>
                    <td>
                    {% if loop.index in [1,5,6] %}
                        <span class="label label-success"> Purchased </span>
                    {% else%}
                        <span class="label label-warning"> Listed </span>
                    {% endif %}
                    </td>
                    <td>{{loop.index * 2}} days ago</td>
                    <td><a href="/users/documents/get/{{i.id}}/{{i.name}}" target="_blank">Update</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    </div>
    </div>
    </div>

</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Status', 'Count'],
          ['Open',     11],
          ['Purchased',      2],
          ['Delivered',  2],
          ['Unpaid', 2],
        ]);

        var options = {
          title: 'Order Status',
          height: 250,
          'chartArea': {'width': '100%', 'height': '80%'},
               'legend': {'position': 'bottom'}
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);

        //chart = new google.visualization.PieChart(document.getElementById('piechart2'));

        //chart.draw(data, options);


        // Flot Charts
            var chart_border_color = "#efefef";
            var chart_color = "#b0b3e3";




        // Bar chart (visitors)

            var dBar = [[utils.get_timestamp(30), 930], [utils.get_timestamp(29), 1200], [utils.get_timestamp(28), 980], [utils.get_timestamp(27), 950], [utils.get_timestamp(26), 1000], [utils.get_timestamp(25), 1050], [utils.get_timestamp(24), 1150], [utils.get_timestamp(23), 2300], [utils.get_timestamp(22), 1200], [utils.get_timestamp(21), 1300], [utils.get_timestamp(20), 1700], [utils.get_timestamp(19), 1450], [utils.get_timestamp(18), 1500], [utils.get_timestamp(17), 546], [utils.get_timestamp(16), 614], [utils.get_timestamp(15), 954], [utils.get_timestamp(14), 1700], [utils.get_timestamp(13), 1800], [utils.get_timestamp(12), 1900], [utils.get_timestamp(11), 2000], [utils.get_timestamp(10), 2100], [utils.get_timestamp(9), 2200], [utils.get_timestamp(8), 2300], [utils.get_timestamp(7), 2400], [utils.get_timestamp(6), 2550], [utils.get_timestamp(5), 2600], [utils.get_timestamp(4), 1800], [utils.get_timestamp(3), 2200], [utils.get_timestamp(2), 2350], [utils.get_timestamp(1), 2800], [utils.get_timestamp(0), 3245]];

            var options2 = {
                yaxes: {
                    min: 0
                },
                xaxis : {
                    mode : "time",
                    timeformat: "%a %d"
                },
                series : {
                    bars : {
                        show : true,
                        lineWidth: 0,
                        barWidth: 47000000, // for bar charts, this is width in milliseconds (86400000 would be the width of a day)
                        align: 'center',
                        fillColor : {
                            colors : [{ opacity : 0.7 }, { opacity : 0.7 }]
                        }
                    }
                },
                grid : {
                    show: true,
                    hoverable : true,
                    clickable : true,
                    tickColor : chart_border_color,
                    borderWidth : 0,
                    borderColor : chart_border_color,
                },
                tooltip : true,
                tooltipOpts : {
                    content : "Visits on <b>%x</b>: <span class='value'>%y</span>",
                    defaultTheme : false,
                    shifts: {
                        x: -65,
                        y: -70
                    }
                },
                colors : ["#4fa3d5"]
            };

            var plot4 = $.plot($("#bar-chart"), [dBar], options2);



      }
    </script>


{% endblock %}

